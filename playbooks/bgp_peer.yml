---
#- name: "PLAY:1 - GET BGP SUMMARY"
#  gather_facts: False
#  connection: "network_cli"
#  hosts: cisco
#  tasks:
#  - name: "1. BGP PEER STATUS"
#    ios_command:
#      commands: 
#      - "show ip bgp summary | i 10.200.200.2"
#      - "sh ip bgp all sum"
#      - "show ip route 10.200.200.2"
#    register: "output_ios"

#  - name: "PRINT OUTPUT_1"
#    debug:
#      msg: "output 1 - {{ output_ios.stdout[0] }}"
#      msg: "output 2 - {{ output_ios.stdout[1] }}"
#      msg: "output 3 - {{ output_ios.stdout[2] }}"

#Ansible-Playbook to display Output of multiple show commands

- name: Display Output of multiple show commands
  hosts: cisco
  gather_facts: no
  connection: network_cli
  become: no
  become_method: enable
  tasks:
   - name: Get the config
     cli_command:
      command: "{{ item }}"
     register: result

     with_items:
       - show ip bgp summary | i 10.200.200.2
       - show ip route 10.200.200.2
       - sh ip bgp all sum
       - sh int Tu1

   - debug:
       msg:
         - "BGP Peer status
         {{ result.results[0].stdout }}"

         - "routed interface for the peered IP 
         {{ result.results[1].stdout }}"

         - "all peer checks
         {{ result.results[2].stdout }}"

         - "interface status and health
         {{ result.results[3].stdout }}"

- name: Email
  hosts: cisco
  vars:
   - gmail_password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      34393437383734653337613866643731646434363435343138653236383336663465316261356530
      3332376363643365383961316638313363643837646630340a393439376130613438343938636637
      64396265373965663430383532393061646163306362386462653465323733326231396538383830
      3132616662643832640a333130356635376333383265303932323432326166633861663431643533
      39393633383237353536303536343931343262326332323439363432383264306131
  tasks:
  - name: Send email to the peering ISP
    mail:
      host: smtp.gmail.com
      port: 587
      password: "{{ gmail_password }}"
      to: prawinkn89@gmail.com
      from: prawinkn89@gmail.com
      username: prawinkn89@gmail.com
      subject: Test
      body: 'test'
    delegate_to: localhost



# Debug output can also be displayed using following lines
#  - debug:
#      msg: "{{ item.stdout_lines }}"
#    with_item
